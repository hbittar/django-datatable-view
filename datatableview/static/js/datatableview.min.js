var datatableview=(function(){var b={serverSide:true,paging:true};var g={name:"name","config-sortable":"orderable","config-sorting":"order","config-visible":"visible","config-searchable":"searchable"};var a=true;var f=false;function c(k,l){k.each(function(){var m=$(this);var n=datatableview.getOptions(m,l);m.DataTable(n)});return k}function i(k,n){var o=[];var l=[];k.find("thead th").each(function(){var v=$(this);var r={};for(var s=0;s<v[0].attributes.length;s++){var p=v[0].attributes[s];if(p.specified&&/^data-/.test(p.name)){var q=p.name.replace(/^data-/,"");var u=p.value;q=g[q];if(/^(true|false)/.test(u.toLowerCase())){u=(u==="true")}if(q=="order"){var t=u.split(",");t[1]=parseInt(t[1]);l.push(t);continue}r[q]=u}}o.push(r)});l.sort(function(q,p){return q[0]-p[0]});for(var m=0;m<l.length;m++){l[m]=l[m].slice(1)}options=$.extend({},datatableview.defaults,n,{order:l,columns:o,pageLength:k.attr("data-page-length"),infoCallback:function(v,t,s,q,u,p){$("#"+k.attr("data-result-counter-id")).html(parseInt(u).toLocaleString());var r=v.oLanguage.sInfo.replace("_START_",t).replace("_END_",s).replace("_TOTAL_",u);if(q!=u){r+=v.oLanguage.sInfoFiltered.replace("_MAX_",q)}return r}});if(Object.keys($.fn.dataTable.ext.buttons).length>0){options=$.extend({},options,{dom:"Bfrtip",buttons:[{text:"XLSX",action:function(s,r,q,p){window.location=k.attr("data-source-url")+"?"+$.param($.extend({},r.ajax.params(),{"export":"xlsx",ajax:true}))}},{text:"PDF",action:function(s,r,q,p){window.location=k.attr("data-source-url")+"?"+$.param($.extend({},r.ajax.params(),{"export":"pdf_e",ajax:true}))}}]})}options.ajax=$.extend(options.ajax,{url:k.attr("data-source-url"),type:k.attr("data-ajax-method")||"GET",beforeSend:function(p){p.setRequestHeader("X-CSRFToken",h("csrftoken"))}});options=datatableview.finalizeOptions(k,options);return options}function j(k,l){if(datatableview.checkGlobalConfirmHook){if(window.confirm_datatable_options!==undefined){l=window.confirm_datatable_options(l,k)}}return l}function e(k){var k=$.extend({},k);if(!k.ajaxOptions){k.ajaxOptions={}}if(!k.ajaxOptions.headers){k.ajaxOptions.headers={}}k.ajaxOptions.headers["X-CSRFToken"]=h("csrftoken");k.error=function(m){var l=m.responseJSON;if(l.status=="error"){var n=$.map(l.form_errors,function(p,o){return p.join("\n")});return n.join("\n")}};return function(m,n,l){$("td a[data-xeditable]",m).editable(k);return m}}function h(k){var o=null;if(document.cookie&&document.cookie!=""){var n=document.cookie.split(";");for(var m=0;m<n.length;m++){var l=jQuery.trim(n[m]);if(l.substring(0,k.length+1)==(k+"=")){o=decodeURIComponent(l.substring(k.length+1));break}}}return o}var d={autoInitialize:f,auto_initialize:undefined,checkGlobalConfirmHook:a,defaults:b,initialize:c,getOptions:i,finalizeOptions:j,makeXEditable:e,make_xeditable:e};return d})();$(function(){var a=null;if(datatableview.auto_initialize===undefined){a=datatableview.autoInitialize}else{a=datatableview.auto_initialize}if(a){datatableview.initialize($(".datatable"))}});